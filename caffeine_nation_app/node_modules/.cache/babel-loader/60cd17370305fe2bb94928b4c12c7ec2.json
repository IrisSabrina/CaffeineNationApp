{"ast":null,"code":"var _jsxFileName = \"/Users/jacobclarke/Desktop/Best_of_Caffeine_Nation/CaffeineNationApp/caffeine_nation_app/src/App.js\";\n///////////////\n// DEPENDENCY\n///////////////\nimport React, { Component } from 'react';\nimport ShopList from './components/ShopList';\nimport Form from './components/Form';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentView: 'shoplist',\n      shopsArray: [] ///////////////\n      // BINDERS\n      ///////////////\n\n    };\n    this.fetchList = this.fetchList.bind(this);\n    this.sortShops = this.sortShops.bind(this);\n    this.setShops = this.setShops.bind(this);\n    this.updateArray = this.updateArray.bind(this);\n    this.handleCreateShop = this.handleCreateShop.bind(this);\n    this.handleView = this.handleView.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.removeFromArray = this.removeFromArray.bind(this);\n  } ///////////////\n  // METHODS\n  ///////////////\n\n\n  handleCreateShop(shop) {\n    console.log(shop);\n    fetch('https://dry-dawn-74348.herokuapp.com/shops', {\n      body: JSON.stringify(shop),\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      }\n    }).then(createdShop => createdShop.json()) //.json() is parsing JSON.parse()\n    .then(jData => {\n      console.log(jData);\n      this.updateArray(jData, 'shopsArray');\n      this.handleView('shopList');\n    }).catch(err => console.log('this is an error', err));\n  } // updateArray( {shopListItem: 'new shop'}, 'shopList')\n\n\n  updateArray(shop, array) {\n    // prevState is a copy of state\n    this.setState(prevState => {\n      // prevState['shopList']\n      prevState[array].push(shop);\n      return {\n        [array]: prevState[array]\n      };\n    });\n  }\n\n  handleDelete(shopId, arrayIndex) {\n    console.log('this is delete', shopId, arrayIndex);\n    fetch(\"https://dry-dawn-74348.herokuapp.com/shops\".concat(shopId), {\n      method: 'DELETE'\n    }).then(data => {\n      this.removeFromArray('shopsArray', arrayIndex);\n    }).catch(err => console.log('this is error from handleDelete', err));\n  }\n\n  removeFromArray(array, arrayIndex) {\n    console.log('this is array', array, arrayIndex);\n    this.setState(prevState => {\n      console.log('this is prevState array', prevState[array]);\n      prevState[array].splice(arrayIndex, 1);\n      return {\n        [array]: prevState[array]\n      };\n    });\n  }\n\n  handleView(view) {\n    // updating state causes a render\n    this.setState({\n      currentView: view\n    });\n  }\n\n  fetchList() {\n    fetch('https://dry-dawn-74348.herokuapp.com/shops').then(data => data.json()).then(jData => {\n      console.log('this is jData', jData);\n      this.sortShops(jData);\n    });\n  }\n\n  sortShops(shops) {\n    let shopsArray = [];\n    shops.forEach(shop => {\n      shopsArray.push(shop);\n    });\n    this.setShops(shopsArray);\n  }\n\n  setShops(created) {\n    this.setState({\n      shopsArray: created\n    });\n  } // run one time only lifecycle method...\n\n\n  componentDidMount() {\n    this.fetchList();\n  } ///////////////\n  // RENDER\n  ///////////////\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"main-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \" Welcome to the Best of Caffeine-Nation\"), React.createElement(Form, {\n      handleCreateShop: this.handleCreateShop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(ShopList, {\n      currentView: this.state.shoplist,\n      shopsArray: this.state.shopsArray,\n      handleDelete: this.handleDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }));\n  }\n\n} ///////////////\n// EXPORT\n///////////////\n\n\nexport default App;","map":{"version":3,"sources":["/Users/jacobclarke/Desktop/Best_of_Caffeine_Nation/CaffeineNationApp/caffeine_nation_app/src/App.js"],"names":["React","Component","ShopList","Form","App","constructor","props","state","currentView","shopsArray","fetchList","bind","sortShops","setShops","updateArray","handleCreateShop","handleView","handleDelete","removeFromArray","shop","console","log","fetch","body","JSON","stringify","method","headers","then","createdShop","json","jData","catch","err","array","setState","prevState","push","shopId","arrayIndex","data","splice","view","shops","forEach","created","componentDidMount","render","shoplist"],"mappings":"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","sourcesContent":["///////////////\n// DEPENDENCY\n///////////////\nimport React, { Component } from 'react'\nimport ShopList from './components/ShopList';\nimport Form from './components/Form';\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n      this.state = {\n        currentView: 'shoplist',\n        shopsArray: []\n      }\n      ///////////////\n      // BINDERS\n      ///////////////\n      this.fetchList = this.fetchList.bind(this);\n      this.sortShops = this.sortShops.bind(this);\n      this.setShops = this.setShops.bind(this);\n      this.updateArray = this.updateArray.bind(this);\n      this.handleCreateShop = this.handleCreateShop.bind(this);\n      this.handleView = this.handleView.bind(this);\n      this.handleDelete = this.handleDelete.bind(this);\n      this.removeFromArray = this.removeFromArray.bind(this);\n  }\n\n  ///////////////\n  // METHODS\n  ///////////////\n\n  handleCreateShop(shop) {\n    console.log(shop);\n  fetch('https://dry-dawn-74348.herokuapp.com/shops', {\n    body:JSON.stringify(shop),\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': 'application/json'\n    }\n  }).then( createdShop => createdShop.json()) //.json() is parsing JSON.parse()\n    .then( jData => {\n      console.log(jData);\n      this.updateArray(jData, 'shopsArray')\n      this.handleView('shopList')\n    })\n    .catch( err => console.log('this is an error', err))\n}\n\n  // updateArray( {shopListItem: 'new shop'}, 'shopList')\n  updateArray(shop, array) {\n    // prevState is a copy of state\n    this.setState( prevState => {\n      // prevState['shopList']\n      prevState[array].push(shop)\n      return {\n        [array]: prevState[array]\n      }\n    })\n  }\n\n  handleDelete(shopId, arrayIndex){\n    console.log('this is delete', shopId, arrayIndex)\n    fetch(`https://dry-dawn-74348.herokuapp.com/shops${shopId}`, {\n      method: 'DELETE'\n    })\n    .then(data => {\n      this.removeFromArray('shopsArray', arrayIndex)\n    }).catch( err => console.log('this is error from handleDelete', err))\n  }\n\n  removeFromArray(array, arrayIndex){\n    console.log('this is array', array, arrayIndex);\n    this.setState(prevState => {\n      console.log('this is prevState array', prevState[array]);\n      prevState[array].splice(arrayIndex, 1)\n      return {\n        [array]: prevState[array]\n      }\n    })\n  }\n\n  handleView(view) {\n    // updating state causes a render\n    this.setState({\n      currentView: view\n    })\n  }\n\n  fetchList () {\n  fetch('https://dry-dawn-74348.herokuapp.com/shops')\n .then( data => data.json())\n .then( jData => {\n   console.log('this is jData', jData)\n   this.sortShops(jData)\n })\n}\n\n  sortShops(shops) {\n    let shopsArray = []\n    shops.forEach( shop => {\n      shopsArray.push(shop)\n    })\n    this.setShops(shopsArray)\n  }\n\n  setShops(created) {\n    this.setState({\n      shopsArray: created\n    })\n  }\n\n\n  // run one time only lifecycle method...\n  componentDidMount() {\n     this.fetchList()\n  }\n\n  ///////////////\n  // RENDER\n  ///////////////\n  render() {\n    return (\n      <div className=\"main-container\">\n      <h1> Welcome to the Best of Caffeine-Nation</h1>\n      <Form\n        handleCreateShop={this.handleCreateShop}\n      />\n      <ShopList\n        currentView={this.state.shoplist}\n        shopsArray={this.state.shopsArray}\n        handleDelete={this.handleDelete}\n      />\n      </div>\n    )\n  }\n}\n\n///////////////\n// EXPORT\n///////////////\nexport default App;\n"]},"metadata":{},"sourceType":"module"}